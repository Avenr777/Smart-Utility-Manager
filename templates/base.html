<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}PulseIQ{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,300&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:       #09090E;
      --surface:  #10101A;
      --elevated: #181824;
      --border:   #252535;
      --text:     #EDEDF2;
      --muted:    #55556A;
      --accent:   #6366F1;
      --normal:   #22C55E;
      --anomaly:  #F59E0B;
      --failure:  #EF4444;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { font-size: 15px; }
    body {
      font-family: 'DM Sans', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }
    .mono { font-family: 'DM Mono', monospace; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

    /* Status dots */
    .dot {
      display: inline-block;
      width: 7px; height: 7px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .dot-normal  { background: var(--normal);  box-shadow: 0 0 6px var(--normal); }
    .dot-anomaly { background: var(--anomaly); box-shadow: 0 0 6px var(--anomaly); }
    .dot-failure { background: var(--failure); box-shadow: 0 0 6px var(--failure); }
    .dot-accent  { background: var(--accent);  box-shadow: 0 0 6px var(--accent); }

    /* Card */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
    }
    .card:hover { border-color: #333348; }

    /* Badge */
    .badge {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 3px 10px; border-radius: 6px;
      font-size: 11px; font-weight: 500; letter-spacing: 0.04em; text-transform: uppercase;
    }
    .badge-normal  { background: rgba(34,197,94,0.1);  color: var(--normal);  border: 1px solid rgba(34,197,94,0.2); }
    .badge-anomaly { background: rgba(245,158,11,0.1); color: var(--anomaly); border: 1px solid rgba(245,158,11,0.2); }
    .badge-failure { background: rgba(239,68,68,0.1);  color: var(--failure); border: 1px solid rgba(239,68,68,0.2); }
    .badge-accent  { background: rgba(99,102,241,0.1); color: var(--accent);  border: 1px solid rgba(99,102,241,0.2); }

    /* Navbar */
    .navbar {
      height: 56px;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 32px;
      position: sticky; top: 0; z-index: 100;
    }
    .navbar-logo {
      font-size: 32px; font-weight: 700; letter-spacing: -0.02em; color: var(--text);
      display: flex; align-items: center; gap: 10px;
    }
    .navbar-logo span {
      width: 12px; height: 12px; border-radius: 50%;
      background: var(--accent); display: inline-block;
      box-shadow: 0 0 12px var(--accent);
    }
    .navbar-right { display: flex; align-items: center; gap: 16px; }
    .navbar-user { font-size: 13px; color: var(--muted); }

    /* Buttons */
    .btn {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 8px 16px; border-radius: 8px;
      font-size: 13px; font-weight: 500;
      cursor: pointer; transition: all 0.15s ease;
      border: none; outline: none;
    }
    .btn-primary {
      background: var(--accent); color: #fff;
    }
    .btn-primary:hover { background: #5254CC; }
    .btn-ghost {
      background: transparent; color: var(--muted);
      border: 1px solid var(--border);
    }
    .btn-ghost:hover { color: var(--text); border-color: #444460; }
    .btn-danger {
      background: transparent; color: var(--failure);
      border: 1px solid rgba(239,68,68,0.3);
    }
    .btn-danger:hover { background: rgba(239,68,68,0.08); }

    /* Sidebar */
    .sidebar {
      width: 220px; min-height: 100%;
      background: var(--bg);
      border-right: 1px solid var(--border);
      padding: 28px 16px;
      display: flex; flex-direction: column; gap: 4px;
    }
    .sidebar-label {
      font-size: 10px; font-weight: 600; letter-spacing: 0.1em;
      text-transform: uppercase; color: var(--muted);
      padding: 0 12px; margin: 16px 0 6px;
    }
    .sidebar-link {
      display: flex; align-items: center; gap: 10px;
      padding: 9px 12px; border-radius: 8px;
      font-size: 13px; font-weight: 400; color: var(--muted);
      text-decoration: none; transition: all 0.15s ease;
    }
    .sidebar-link:hover { background: var(--elevated); color: var(--text); }
    .sidebar-link.active { background: var(--elevated); color: var(--text); }
    .sidebar-link svg { width: 15px; height: 15px; flex-shrink: 0; }

    /* KPI card */
    .kpi { display: flex; flex-direction: column; gap: 6px; }
    .kpi-label { font-size: 11px; font-weight: 500; letter-spacing: 0.06em; text-transform: uppercase; color: var(--muted); }
    .kpi-value { font-size: 26px; font-weight: 600; letter-spacing: -0.03em; color: var(--text); font-family: 'DM Mono', monospace; }
    .kpi-sub   { font-size: 12px; color: var(--muted); }

    /* Input */
    .input {
      width: 100%; background: var(--elevated);
      border: 1px solid var(--border); border-radius: 8px;
      padding: 10px 14px; font-size: 14px; color: var(--text);
      font-family: 'DM Sans', sans-serif;
      outline: none; transition: border-color 0.15s;
    }
    .input:focus { border-color: var(--accent); }
    .input::placeholder { color: var(--muted); }

    /* Divider */
    .divider { width: 100%; height: 1px; background: var(--border); }

    /* Alert banner */
    .alert-banner {
      display: flex; align-items: center; gap: 12px;
      padding: 12px 20px; border-radius: 8px;
      border: 1px solid rgba(239,68,68,0.3);
      background: rgba(239,68,68,0.06);
      font-size: 13px;
    }

    /* Fade in */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(8px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .fade-up { animation: fadeUp 0.3s ease forwards; }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body>

  {% block navbar %}
  <nav class="navbar">
    <a href="{% url 'home' %}" class="navbar-logo" style="text-decoration:none;">
      PulseIQ <span></span>
    </a>
    <div class="navbar-right">
      {% if user.is_authenticated %}
        <span class="navbar-user">{{ user.username }}</span>
        <form method="POST" action="{% url 'logout' %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">Sign out</button>
        </form>
      {% endif %}
    </div>
  </nav>
  {% endblock %}

  {% block content %}{% endblock %}

  <script>
    // Active sidebar link highlight
    document.querySelectorAll('.sidebar-link').forEach(link => {
      if (link.href === window.location.href) link.classList.add('active');
    });
  </script>
  {% block extra_js %}{% endblock %}
</body>
</html>